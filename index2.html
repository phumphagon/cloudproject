<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>RaPunSale - ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</title>
  <link rel="stylesheet" href="CSS/index2.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
</head>
<body>
  <!-- Top Bar -->
  <header class="top-bar">
    <div class="lang">üåê TH | ‡πÑ‡∏ó‡∏¢</div>
  </header>

  <!-- Main Product Section -->
  <section class="product-detail">
    <div class="product-image">
      <img src="image/product3.png" alt="‡πÄ‡∏ï‡∏µ‡∏¢‡∏á IDAN√ÑS" />
    </div>

    <div class="product-info">
      <h2 class="product-title">IDAN√ÑS ‡∏≠‡∏¥‡∏î‡∏≤‡πÄ‡∏ô‡∏™</h2>
      <p class="product-desc">‡∏Ç‡∏ô‡∏≤‡∏î‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô, ‡∏™‡∏µ‡∏î‡∏≥</p>
      <p class="product-price">27,990 <span>‡∏ö‡∏≤‡∏ó</span></p>
      <p class="product-stock"><i class="fa fa-check"></i> ‡∏°‡∏µ‡∏™‡∏ï‡πá‡∏≠‡∏Å</p>
      <p id="product-quantity"><i class="fa fa-cubes"></i> ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÉ‡∏ô‡∏Ñ‡∏•‡∏±‡∏á: <span>...</span></p>

      <div class="product-action">
        <div class="quantity-selector">
          <input type="number" value="1" min="1" />
        </div>
        <button class="add-to-cart">Update Stock</button>
      </div>

      <button class="download-info">‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</button>
    </div>
  </section>

  <script>
    const productId = 'p001'; // ‡∏™‡∏°‡∏°‡∏∏‡∏ï‡∏¥‡∏ß‡πà‡∏≤‡πÉ‡∏ä‡πâ ID ‡∏ô‡∏µ‡πâ

    async function fetchProductQuantity() {
      try {
        const res = await fetch(`/api/product/${productId}`);
        const data = await res.json();
        document.querySelector("#product-quantity span").textContent = data.quantity ?? '‡πÑ‡∏°‡πà‡∏û‡∏ö';
      } catch (err) {
        console.error("‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏î‡πâ", err);
        document.querySelector("#product-quantity span").textContent = '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏î‡πâ';
      }
    }

    fetchProductQuantity();
  </script>
</body>
</html>
